mutation CreateUser(
    $userCreatedAt: Date!, 
    $userName: String!, 
    $userEmail: String!) 
    @auth(level: USER)
{ 
  user_insert(
    data: { 
        userCreatedAt: $userCreatedAt, 
        userEmail: $userEmail, 
        userId: "auth.uid", 
        userName: $userName
    }
  ) 
}

mutation CreateUnit(
    $unitName: String!, 
    $unitLocal: String!, 
    $unitMacCapacity: Int!, 
    $unitManagerId: UUID!, 
    $unitActive: Boolean!) 
    @auth(level: USER)
{ 
  unit_insert(
    data: { 
        unitActive: $unitActive, 
        unitLocal: $unitLocal, 
        unitMacCapacity: $unitMacCapacity, 
        unitManagerId: $unitManagerId, 
        unitName: $unitName
    }
  ) 
}

mutation updateUnit(
    $unitId: UUID!,
    $unitName: String!,
    $unitLocal: String!,
    $unitMacCapacity: Int!,
    $unitManagerId: UUID!,
    $unitActive: Boolean!
) @auth(level: USER) {
  unit_update(
    id: $unitId,
    data: {
      unitName: $unitName,
      unitLocal: $unitLocal,
      unitMacCapacity: $unitMacCapacity,
      unitManagerId: $unitManagerId,
      unitActive: $unitActive
    }
  ) 
}

mutation DeleteUnit($unitId: UUID!) @auth(level: USER) {
  unit_delete(id: $unitId)
}

mutation CreateMovie(
  $movieTitle: String!, 
  $movieGenre: String!, 
  $movieAgeClass: String!, 
  $movieDuration: Int!, 
  $movieDistrib: String!, 
  $movieFormat: String!, 
  $movieDirector: String!, 
  $movieActive: Boolean!) 
  @auth(level: USER)
{ 
  movie_insert(
    data: { 
      movieTitle: $movieTitle, 
      movieGenre: $movieGenre, 
      movieAgeClass: $movieAgeClass, 
      movieDuration: $movieDuration, 
      movieDistrib: $movieDistrib, 
      movieFormat: $movieFormat, 
      movieDirector: $movieDirector, 
      movieActive: $movieActive
    }
  ) 
}

# ...existing mutations...

mutation UpdateMovie(
  $movieId: UUID!,
  $movieTitle: String!,
  $movieGenre: String!,
  $movieAgeClass: String!,
  $movieDuration: Int!,
  $movieDistrib: String!,
  $movieFormat: String!,
  $movieDirector: String!,
  $movieActive: Boolean!
) @auth(level: USER) {
  movie_update(
    id: $movieId,
    data: {
      movieTitle: $movieTitle,
      movieGenre: $movieGenre,
      movieAgeClass: $movieAgeClass,
      movieDuration: $movieDuration,
      movieDistrib: $movieDistrib,
      movieFormat: $movieFormat,
      movieDirector: $movieDirector,
      movieActive: $movieActive
    }
  ) 
}

mutation DeleteMovie($movieId: UUID!) @auth(level: USER) {
  movie_delete(id: $movieId)
}

mutation CreateAudience(
  $audienceUnitId: UUID!, 
  $audienceAge: Int!, 
  $audienceGender: String!, 
  $audienceFormat: String!) 
  @auth(level: USER)
{ 
  audience_insert(
    data: { 
        audienceAge: $audienceAge, 
        audienceFormat: $audienceFormat, 
        audienceGender: $audienceGender, 
        audienceUnitId: $audienceUnitId
    }
  ) 
}

mutation createProduct(
  $productName: String!,
  $productType: String!,
  $productPrice: Float!,
  $productActive: Boolean!
) @auth(level: USER) {
  product_insert(
    data: {
      productName: $productName,
      productType: $productType,
      productPrice: $productPrice,
      productActive: $productActive
    }
  ) 
}

mutation CreateSession(
  $sessionMovieId: UUID!,
  $sessionUnitId: UUID!,
  $sessionDate: Date!,
  $sessionHour: Date!,
  $sessionTicketsSold: Int,
  $sessionNetValue: Float
) @auth(level: USER, insecureReason: "Allows managers to register manual sessions") {
  session_insert(
    data: {
      sessionMovieId: $sessionMovieId,
      sessionUnitId: $sessionUnitId,
      sessionDate: $sessionDate,
      sessionHour: $sessionHour,
      sessionTicketsSold: $sessionTicketsSold,
      sessionNetValue: $sessionNetValue
    }
  )
}

mutation CreateSale(
  $saleProductId: UUID!,
  $saleSessionId: UUID!,
  $saleDate: Date!,
  $saleQuant: Int!,
  $saleNetValue: Float
) @auth(level: USER, insecureReason: "Allows managers to register manual accessory sales") {
  sale_insert(
    data: {
      saleProductId: $saleProductId,
      saleSessionId: $saleSessionId,
      saleDate: $saleDate,
      saleQuant: $saleQuant,
      saleNetValue: $saleNetValue
    }
  )
}

#mutation DeleteUser($id: UUID!) @auth(level: USER) {
#  user_delete(id: $id)
#}