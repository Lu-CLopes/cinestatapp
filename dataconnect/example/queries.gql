query ReadAllUsers @auth(level: USER){
  users {
    id
    userId
    userName
    userEmail
    userCreatedAt
  }
}

query ReadSingleUser($id: UUID!) @auth(level: USER) {
  user(id : $id) {
    id
    userId
    userName
    userEmail
    userCreatedAt
  }
}
query ReadManagerUnits ($managerId: UUID!) @auth(level: USER){
  units (where: { unitManager: { id: { eq: $managerId } } }) {
    id
    unitName
    unitLocal
    unitMacCapacity
    unitManager {
      userName
    }
    unitActive
  }
}

query ReadManagerUnitsByAuth($authId: String!) @auth(level: USER, insecureReason: "Allows managers to load units by Firebase auth UID"){
  units (where: { unitManager: { userId: { eq: $authId } } }) {
    id
    unitName
    unitLocal
    unitMacCapacity
    unitManager {
      userName
    }
    unitActive
  }
}

query ReadAllMovies @auth(level: USER){
  movies{
    id
    movieTitle
    movieGenre
    movieAgeClass
    movieDuration
    movieDistrib
    movieFormat
    movieDirector
    movieActive
  }
}

query readSingleMovie($id: UUID!) @auth(level: USER) {
  movie(id : $id) {
    id
    movieTitle
    movieGenre
    movieAgeClass
    movieDuration
    movieDistrib
    movieFormat
    movieDirector
    movieActive
  }
}

query ReadAudienceByUnit($unitId: UUID!) @auth(level: USER) {
  audiences(where: { audienceUnit: { id: { eq: $unitId } } }) {
    id
    audienceAge
    audienceGender
    audienceFormat
  }
}

query ReadAllUnits @auth(level: USER, insecureReason: "Allows managers to load legacy units without owner metadata"){
  units {
    id
    unitName
    unitLocal
    unitMacCapacity
    unitActive
    unitManager {
      userName
      userEmail
      id
    }
  }
}

query ReadAllProducts @auth(level: USER, insecureReason: "Allows managers to view accessory revenue products"){
  products {
    id
    productName
    productType
    productPrice
    productActive
    sales_on_saleProduct {
      saleQuant
      saleNetValue
    }
  }
}

query ReadAllSessions @auth(level: USER, insecureReason: "Allows managers to load sessions for manual sales registration"){
  sessions(orderBy: { sessionDate: DESC }) {
    id
    sessionDate
    sessionHour
    sessionNetValue
    sessionTicketsSold
    sessionMovie {
      id
      movieTitle
    }
    sessionUnit {
      id
      unitName
    }
  }
}





